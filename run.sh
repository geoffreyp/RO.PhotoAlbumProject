#!/bin/bash

if [ ! -d "compile" ]; then
  echo "------------------------------------------------------------------------------------------------"
  echo "- Creation of 'compile' directory to avoid conflicts with binary files generated by Eclipse... -"
  echo "------------------------------------------------------------------------------------------------\n"
  mkdir compile
fi

if [ "build" == "$1" ]; then
  echo "------------------------------------------------------------------------------------------------"
  echo "--------------------------------- Compiling scala code... --------------------------------------"
  echo "------------------------------------------------------------------------------------------------\n"
  scalac -d compile -cp bin:lib/json-simple-1.1.1.jar -sourcepath src src/*.scala
fi

echo "------------------------------------------------------------------------------------------------"
echo "----------------------------------- Start executing code... ------------------------------------"
echo "------------------------------------------------------------------------------------------------\n"
scala -cp compile:lib/json-simple-1.1.1.jar Main

if [ "show" == "$1" ] || [ "show" == "$2" ]; then
  echo "------------------------------------------------------------------------------------------------"
  echo "--------------------------------- Album pages building...---------------------------------------"
  echo "------------------------------------------------------------------------------------------------\n"
  python buildAlbum.py fichier.sol
fi
echo "------------------------------------------------------------------------------------------------"
echo "------------------------------------- Work is done :) ------------------------------------------"
echo "------------------------------------------------------------------------------------------------\n"
